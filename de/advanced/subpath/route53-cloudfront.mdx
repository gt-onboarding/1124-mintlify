---
title: "AWS Route 53 und CloudFront"
sidebarTitle: "AWS"
description: "Dokumentation mit AWS-Services unter einem benutzerdefinierten Unterpfad hosten"
---

import Propagating from "/snippets/de/custom-subpath-propagating.mdx";

Um Ihre Dokumentation unter einem benutzerdefinierten Unterpfad wie `yoursite.com/docs` mit AWS Route 53 und CloudFront zu hosten, müssen Sie Ihren DNS-Anbieter so konfigurieren, dass er auf Ihre CloudFront-Distribution verweist.


<div id="repository-structure">
  ## Repository-Struktur
</div>

Ihre Dokumentationsdateien müssen in Ihrem Repository so organisiert sein, dass sie der gewählten Subpfadstruktur entsprechen. Wenn Sie Ihre Dokumentation beispielsweise unter `yoursite.com/docs` bereitstellen möchten, erstellen Sie ein Verzeichnis `docs/` mit allen Dokumentationsdateien.

<div id="high-level-overview">
  ## Übersicht auf hoher Ebene
</div>

Leiten Sie den Traffic mit der Cache-Richtlinie **CachingDisabled** an diese Pfade weiter:

- `/.well-known/acme-challenge/*` - Erforderlich für die Let's Encrypt-Zertifikatsüberprüfung
- `/.well-known/vercel/*` - Erforderlich für die Domain-Verifizierung
- `/docs/*` - Erforderlich für Subpfad-Routing
- `/docs/` - Erforderlich für Subpfad-Routing

Leiten Sie den Traffic mit der Cache-Richtlinie **CachingEnabled** an diesen Pfad weiter:

- `/mintlify-assets/_next/static/*`
- `Default (*)` - Die Landingpage Ihrer Website

Alle Behaviors müssen die **origin request policy** `AllViewerExceptHostHeader` haben.

![CloudFront "Behaviors"-Seite mit 4 Behaviors: `/docs/*`, `/docs`, `Default` und `/.well-known/*`.](/images/cloudfront/all-behaviors.png)

<div id="create-cloudfront-distribution">
  ## CloudFront-Verteilung erstellen
</div>

1. Navigiere in der AWS-Konsole zu [CloudFront](https://aws.amazon.com/cloudfront).
2. Wähle **Create distribution**.

<Frame>
    ![Seite „CloudFront Distributions“ mit hervorgehobener Schaltfläche „Create distribution“.](/images/cloudfront/create-distribution.png)
  </Frame>

3. Gib bei Origin domain `[SUBDOMAIN].mintlify.dev` ein, wobei `[SUBDOMAIN]` die eindeutige Subdomain deines Projekts ist.

<Frame>
    ![Seite „CloudFront Create distribution“ mit „acme.mintlify.dev“ als Origin domain.](/images/cloudfront/origin-name.png)
  </Frame>

4. Aktiviere bei „Web Application Firewall (WAF)“ die Sicherheitsfunktionen.

<Frame>
    ![Optionen der Web Application Firewall (WAF) mit ausgewählter Option „Enable security protections“.](/images/cloudfront/enable-security-protections.png)
  </Frame>

5. Die übrigen Einstellungen bleiben auf den Standardwerten.
6. Wähle **Create distribution**.

<div id="add-default-origin">
  ## Standardorigin hinzufügen
</div>

1. Navigieren Sie nach dem Erstellen der Distribution zum Tab „Origins“.

<Frame>
    ![Eine CloudFront-Distribution mit hervorgehobenem Tab „Origins“.](/images/cloudfront/origins.png)
  </Frame>

2. Suchen Sie die Staging-URL, die Ihrer Hauptdomain entspricht. Das hängt stark davon ab, wie Ihre Landing-Page gehostet wird. Zum Beispiel lautet die Mintlify-Staging-URL [mintlify-landing-page.vercel.app](https://mintlify-landing-page.vercel.app).

<Info>
  Wenn Ihre Landing-Page auf Webflow gehostet ist, verwenden Sie die Staging-URL von Webflow. Sie sieht aus wie `.webflow.io`.

  Wenn Sie Vercel verwenden, nutzen Sie die Domain `.vercel.app`, die für jedes Projekt verfügbar ist.
</Info>

3. Erstellen Sie einen neuen Origin und fügen Sie Ihre Staging-URL als „Origin domain“ hinzu.

<Frame>
    ![CloudFront-Seite „Create origin“ mit hervorgehobenem Eingabefeld „Origin domain“.](/images/cloudfront/default-origin.png)
  </Frame>

An diesem Punkt sollten Sie zwei Origins haben: einen mit `[SUBDOMAIN].mintlify.app` und einen weiteren mit Ihrer Staging-URL.

<Frame>
  ![CloudFront-Seite „Origins“ mit zwei Origins: einer für `mintlify` und ein weiterer für `mintlify-landing-page`.](/images/cloudfront/final-origins.png)
</Frame>

<div id="set-behaviors">
  ## Verhaltensregeln festlegen
</div>

Verhaltensregeln in CloudFront steuern die Logik für Subpfade. Auf höherer Ebene wollen wir folgende Logik umsetzen:

- **Wenn ein Benutzer auf Ihrem benutzerdefinierten Subpfad landet**, gehen Sie zu `[SUBDOMAIN].mintlify.dev`.
- **Wenn ein Benutzer auf einer beliebigen anderen Seite landet**, gehen Sie zur aktuellen Landingpage.

1. Navigieren Sie zum Tab „Behaviors“ Ihrer CloudFront-Distribution.

<Frame>
	![CloudFront-Tab „Behaviors“ hervorgehoben.](/images/cloudfront/behaviors.png)
</Frame>

2. Wählen Sie die Schaltfläche **Create behavior** und legen Sie die folgenden Verhaltensregeln an.

<div id="well-known">
  ### `/.well-known/*`
</div>

Erstellen Sie Regeln für Vercel-Domainüberprüfungspfade mit dem **Path pattern** `/.well-known/*` und setzen Sie **Origin and origin groups** auf die URL Ihrer Dokumentation.

Wählen Sie für „Cache policy“ **CachingDisabled**, damit diese Überprüfungsanfragen ohne Caching durchgeleitet werden.

<Frame>
  ![CloudFront-Seite „Create behavior“ mit einem „Path pattern“ von „/.well-known/*“ und „Origin and origin groups“, die auf die Staging-URL verweisen.](/images/cloudfront/well-known-policy.png)
</Frame>

<Info>
Wenn `/.well-known/*` zu allgemein ist, kann es für Vercel mindestens auf 2 Regeln eingegrenzt werden:
  - `/.well-known/vercel/*` – erforderlich für die Vercel-Domainüberprüfung
  - `/.well-known/acme-challenge/*` – erforderlich für die Let's Encrypt-Zertifikatsüberprüfung
</Info>

<div id="your-custom-subpath">
  ### Ihr benutzerdefinierter Unterpfad
</div>

Erstellen Sie ein Behavior mit einem **Path pattern** für Ihren gewünschten Unterpfad, zum Beispiel `/docs`, wobei **Origin and origin groups** auf die `.mintlify.dev`-URL zeigen (in unserem Fall `acme.mintlify.dev`).

- Setzen Sie „Cache policy“ auf **CachingOptimized**.
- Setzen Sie „Origin request policy“ auf **AllViewerExceptHostHeader**.
- Setzen Sie „Viewer Protocol Policy“ auf **Redirect HTTP to HTTPS**.

<Frame>
  ![CloudFront-Seite „Create behavior“ mit einem „Path pattern“ von „/docs/*“ und „Origin and origin groups“, die auf die URL `acme.mintlify.dev` zeigen.](/images/cloudfront/behavior-1.png)
</Frame>

<div id="your-custom-subpath-with-wildcard">
  ### Ihr benutzerdefinierter Unterpfad mit Wildcard
</div>

Erstellen Sie ein Behavior mit einem **Path pattern** aus Ihrem gewählten Unterpfad, gefolgt von `/*` (z. B. `/docs/*`), und **Origin and origin groups**, die auf dieselbe `.mintlify.dev`-URL verweisen.

Diese Einstellungen sollten exakt Ihrem Basis-Unterpfad-Behavior entsprechen – mit Ausnahme des **Path pattern**.

- Setzen Sie „Cache policy“ auf **CachingOptimized**.
- Setzen Sie „Origin request policy“ auf **AllViewerExceptHostHeader**.
- Setzen Sie „Viewer protocol policy“ auf **Redirect HTTP to HTTPS**.

<div id="mintlify-assets_nextstatic">
  ### `/mintlify-assets/_next/static/*`
</div>

- Setze „Cache policy“ auf **CachingOptimized**
 - Setze „Origin request policy“ auf **AllViewerExceptHostHeader**
 - Setze „Viewer protocol policy“ auf **Redirect HTTP to HTTPS**

<div id="default">
  ### `Default (*)`
</div>

Zum Schluss bearbeiten wir das Verhalten `Default (*)`.

<Frame>
  ![Eine CloudFront-Distribution mit dem ausgewählten Verhalten „Default (*)“ und hervorgehobener Schaltfläche „Edit“.](/images/cloudfront/default-behavior-1.png)
</Frame>

1. Ändern Sie beim Standardverhalten **Origin and origin groups** auf die Staging-URL (in unserem Fall `mintlify-landing-page.vercel.app`).

<Frame>
  ![CloudFront-Seite „Edit behavior“ mit hervorgehobenem Eingabefeld „Origin and origin groups“.](/images/cloudfront/default-behavior-2.png)
</Frame>

2. Wählen Sie **Änderungen speichern**.

<div id="check-behaviors-are-set-up-correctly">
  ### Prüfen, ob Behaviors korrekt eingerichtet sind
</div>

Wenn Sie die oben beschriebenen Schritte befolgen, sollten Ihre Behaviors wie folgt aussehen:

<Frame>
  ![CloudFront-„Behaviors“-Seite mit 4 Behaviors: `/docs/*`, `/docs`, `Default` und `/.well-known/*`.](/images/cloudfront/all-behaviors.png)
</Frame>

<div id="preview-distribution">
  ## Vorschau der Distribution
</div>

Sie können jetzt testen, ob Ihre Distribution korrekt eingerichtet ist, indem Sie zum Tab „General“ gehen und die URL **Distribution domain name** aufrufen.

<Frame>
  ![CloudFront-Tab „General“ mit der hervorgehobenen URL „Distribution domain name“.](/images/cloudfront/preview-distribution.png)
</Frame>

Alle Seiten sollten auf Ihre Haupt-Landingpage verweisen. Wenn Sie jedoch Ihren gewählten Unterpfad – zum Beispiel `/docs` – an die URL anhängen, sollten Sie sehen, dass diese zu Ihrer Mintlify-Dokumentationsinstanz führt.

<div id="connect-with-route53">
  ## Mit Route 53 verbinden
</div>

Jetzt binden wir die Funktionalität der CloudFront-Distribution in Ihre primäre Domain ein.

<Note>
  Für diesen Abschnitt können Sie auch den offiziellen AWS-Leitfaden konsultieren: [Configuring
  Amazon Route 53 to route traffic to a CloudFront
  distribution](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-to-cloudfront-distribution.html#routing-to-cloudfront-distribution-config)
</Note>

1. Navigieren Sie in der AWS-Konsole zu [Route 53](https://aws.amazon.com/route53).
2. Öffnen Sie die Hosted Zone Ihrer primären Domain.
3. Wählen Sie **Create record**.

<Frame>
  ![Route 53-Seite „Records“ mit hervorgehobener Schaltfläche „Create record“.](/images/cloudfront/route53-create-record.png)
</Frame>

4. Aktivieren Sie `Alias` und wählen Sie bei **Route traffic to** die Option `Alias to CloudFront distribution`.

<Frame>
  ![Route 53-Seite „Create record“ mit hervorgehobenem „Alias“-Schalter und Menü „Route traffic to“.](/images/cloudfront/create-record-alias.png)
</Frame>

5. Wählen Sie **Create records**.

<Note>
  Gegebenenfalls müssen Sie einen vorhandenen A-Record entfernen, falls bereits einer existiert.
</Note>

Ihre Dokumentation ist nun unter dem gewählten Unterpfad Ihrer primären Domain live.

<Propagating />